version: '3'

services:
    bwpm-tester:
        container_name: "bwpm-tester"
        image: romana/os-chromium-tester
        volumes:
            - {{ workspace }}/container_files/files-{{ suite_vars.suite_number }}:/data
#        environment:
#            - BW_TEST_PROJECT=${BW_TEST_PROJECT}
#            - BW_TEST_NET_NAME=${BW_TEST_NET_NAME}
#            - BW_TEST_JOOMLA_VERSION=${BW_TEST_JOOMLA_VERSION}
#            - BW_TEST_BWPM_VERSION=${BW_TEST_BWPM_VERSION}
#            - BW_TEST_VM_VERSION=${BW_TEST_VM_VERSION}
#            - BW_TEST_BWPM_INSTALL=${BW_TEST_BWPM_INSTALL}
#            - BW_TEST_CAT=${BW_TEST_CAT}
#            - BW_TEST_DEBUG=${BW_TEST_DEBUG}
#            - BW_TEST_RUNNER=${BW_TEST_RUNNER}
        working_dir: /
        entrypoint: /scripts/do-container-tests.sh
        networks:
            {{ network }}-{{ suite_vars.suite_number }}{{ network_suffix }}:
               ipv4_address: {{ suite_vars.tester_ip }}

networks:
    {{ network }}-{{ suite_vars.suite_number }}{{ network_suffix }}:
        external:
            name: ${BW_TEST_NET_NAME}_tester-net-bwpm.nil

