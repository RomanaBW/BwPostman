---
- hosts: localhost
  vars_files:
    - vars/container-vars.yml

  tasks:
    - name: set suite list variable
      set_fact:
        suite_vars: "{{ Suites[suite_set] }}"

    - name: debug suite variable
      debug:
        msg: "{{ suite_vars['suite_number'] }}"

    - name: check database
      shell: "sudo docker exec {{ db.container_name }}-{{ suite_vars.suite_number }} mysql -u {{ BW_TEST_DB_USER }} -p{{ BW_TEST_DB_PW }} -e 'show databases;'"

    - name: fill database
      shell: "mysql -u {{ BW_TEST_DB_USER }} -p{{ BW_TEST_DB_PW }} -h {{ suite_vars.db_ip }}-{{ suite_vars.suite_number }} {{ BW_TEST_DB_NAME }} < {{  workspace  }}/container_files/backups/{{ project_name }}.sql"
